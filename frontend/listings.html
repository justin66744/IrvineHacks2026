<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Equity Guardian | Listings</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="">
  <link rel="stylesheet" href="styles.css">
  <style>
    .listings-search-form { display: flex; gap: 0.75rem; flex-wrap: wrap; align-items: center; }
    .listings-source { font-size: 0.875rem; color: var(--muted); margin-top: 0.5rem; }
    .listings-error { color: var(--coral); margin-top: 0.5rem; }
    #listings-container.loading { opacity: 0.7; }
    .listing-scroll { min-height: 280px; }
    .listings-empty { color: var(--muted); margin: 0; }
    #listings-map { width: 100%; height: 100%; min-height: 400px; border-radius: var(--radius-md); }
    .listings-map-legend { display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 0.5rem; font-size: 0.875rem; color: var(--muted); }
    .listings-map-legend span { display: inline-flex; align-items: center; gap: 0.35rem; }
    .listings-map-legend .dot { width: 10px; height: 10px; border-radius: 50%; }
    .listings-map-legend .dot-high { background: #dc2626; }
    .listings-map-legend .dot-moderate { background: #f59e0b; }
    .listings-map-legend .dot-low { background: #16a34a; }
  </style>
</head>
<body data-page="listings">
  <div class="page-glow glow-a"></div>
  <div class="page-glow glow-b"></div>
  <div class="site-shell">
    <header class="site-header">
      <a class="brand" href="index.html">
        <span class="brand-badge">EG</span>
        <span class="brand-copy">
          <strong>Equity Guardian</strong>
          <small>Housing transparency for families</small>
        </span>
      </a>
      <nav class="site-nav">
        <a href="index.html">Home</a>
        <a href="risk-score.html">Risk Score</a>
        <a href="listings.html">Listings</a>
        <a href="alerts.html">Alerts</a>
        <a href="assistance.html">Assistance</a>
      </nav>
    </header>

    <main class="listings-page">
      <section class="listings-topbar reveal-on-scroll">
        <form id="listings-form" class="listings-search-form">
          <div class="listings-search">
            <input type="text" id="listings-zip" placeholder="ZIP (optional, e.g. 92618)" aria-label="ZIP code">
          </div>
          <button type="submit" class="button button-primary">Load market data</button>
        </form>
        <p id="listings-source" class="listings-source"></p>
        <p id="listings-error" class="listings-error" role="alert"></p>
      </section>

      <section class="listings-split reveal-on-scroll">
        <div class="listings-column">
          <div class="listing-scroll" id="listings-container">
            <p class="listings-empty">Loading…</p>
          </div>
        </div>

        <div class="listings-map-column">
          <div class="listings-map-stage">
            <div id="listings-map" aria-label="Map of listing areas by risk"></div>
            <div class="listings-map-legend">
              <span><i class="dot dot-high"></i> High risk (7–10)</span>
              <span><i class="dot dot-moderate"></i> Moderate (5–6)</span>
              <span><i class="dot dot-low"></i> Low risk (1–4)</span>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <script src="app.js"></script>
  <script src="api.js"></script>
</body>
</html>
